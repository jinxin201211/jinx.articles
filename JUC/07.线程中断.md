# 线程中断

## 什么是中断机制

一个线程不应该由其他线程来强制中断或停止，而是应该由线程自己自行停止。所以 `Thread.stop()` 、 `Thread.suspend()` 和 `Thread.resume()` 三个方法应该被废弃，不建议使用。

在 Java 中没有办法立即停止一个线程，然而停止线程尤为重要，例如当应用程序运行太长时间时，或者某个线程占用了必要资源时。因此 Java 提供了一种用于停止线程的协商机制+中断，也即中断标识协商机制。

中断只是作为一种协商机制，Java 没有给中断增加任何语法，中断的过程完全由程序自行控制。

若要中断一个线程，你需要手动调用该线程的 interrupt() 方法。该方法也只是将中断标识设置为 true，因此你需要自己处理中断标识。接着要自己不断检测当前线程的中断标识，并根据中断标识来控制线程的停止。

## interrupt() 方法

实例方法，仅仅是将中断标识设置为 true，线程的中断状态不会立即改变。

## interrupted() 方法

静态方法，返回当前线程的中断状态，测试当前线程是否已经中断，并清除中断状态。

## isInterrupted() 方法

实例方法，返回当前线程的中断状态，不清除中断状态。

## 当对一个线程调用 interrupt() 方法时

- 如果线程处于正常活动状态，那么就会设置中断标识为 true。被设置中断标识的线程将继续正常运行，不受影响。interrupt() 方法不会真正中断线程，需要被调用的线程自己配合。

- 如果该线程处于阻塞、限期等待或者无限期等待状态，那么就会抛出 `InterruptedException` ，从而提前结束该线程。但是需要注意的是， `InterruptedException` 是一个 `RuntimeException` ，因此它的出现并不一定要立即终止线程。

- 中断不活动的线程不会产生任何影响。
